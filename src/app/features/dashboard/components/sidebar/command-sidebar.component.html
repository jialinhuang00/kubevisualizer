<div class="cyber-container p-3 commands-section">
  <h2 class="text-lg font-semibold mb-3 glow-text" style="color: var(--text-primary)">Commands</h2>

  <!-- Namespace Selector -->
  <app-namespace-selector
    [namespaces]="data.namespaces"
    [selectedNamespace]="data.selectedNamespace"
    [isInitializing]="data.isInitializing"
    [isLoadingNamespaces]="data.isLoadingNamespaces"
    (namespaceChange)="onNamespaceChange($event)">
  </app-namespace-selector>

  <!-- General Templates -->
  <app-resource-section
    title="General Commands"
    [templates]="data.generalTemplates"
    [isExpanded]="isGeneralExpanded()"
    [isInitializing]="data.isInitializing"
    (toggleExpanded)="onToggleGeneralSection()"
    (templateExecute)="onTemplateExecute($event)">
  </app-resource-section>

  <!-- Deployment Section -->
  @if (data.deployments.length > 0) {
  <app-resource-section
    title="Deployment Commands"
    [resources]="data.deployments"
    [selectedResource]="data.selectedDeployment"
    [templates]="data.deploymentTemplates"
    [isExpanded]="isDeploymentExpanded()"
    [rolloutTemplates]="data.rolloutTemplates"
    [isRolloutConsoleExpanded]="isRolloutConsoleExpanded()"
    [deploymentStatus]="data.deploymentStatus"
    [buttonStates]="data.buttonStates"
    [rolloutHistory]="data.rolloutHistory"
    resourceType="deployment"
    accentColor="cyan"
    (resourceChange)="onDeploymentChange($event)"
    (toggleExpanded)="onToggleDeploymentSection()"
    (templateExecute)="onTemplateExecute($event)"
    (rolloutConsoleToggle)="onToggleRolloutConsole()"
    (imageUpgrade)="onImageUpgrade($event)"
    (rolloutAction)="onRolloutAction($event)">
  </app-resource-section>
  }

  <!-- Pod Section -->
  @if (data.pods.length > 0) {
  <app-resource-section
    title="Pod Commands"
    [resources]="data.pods"
    [selectedResource]="data.selectedPod"
    [templates]="data.podTemplates"
    [isExpanded]="isPodSectionExpanded()"
    resourceType="pod"
    accentColor="purple"
    (resourceChange)="onPodChange($event)"
    (toggleExpanded)="onTogglePodSection()"
    (templateExecute)="onTemplateExecute($event)">
  </app-resource-section>
  }

  <!-- Service Section -->
  @if (data.services.length > 0) {
  <app-resource-section
    title="Service Commands"
    [resources]="data.services"
    [selectedResource]="data.selectedService"
    [templates]="data.serviceTemplates"
    [isExpanded]="isServiceSectionExpanded()"
    resourceType="service"
    accentColor="orange"
    (resourceChange)="onServiceChange($event)"
    (toggleExpanded)="onToggleServiceSection()"
    (templateExecute)="onTemplateExecute($event)">
  </app-resource-section>
  }
</div>