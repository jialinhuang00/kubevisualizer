<div class="min-h-screen p-3">
  <div class="max-w-7xl mx-auto">
    <header class="mb-4">
      <h1 class="text-2xl font-bold glow-text mb-1" style="color: var(--accent-cyan)">{{ title() }}</h1>
      <p class="text-xs" style="color: var(--text-secondary)">Kubectl Commands Visualized</p>
    </header>

    <div class="grid grid-cols-[350px_1fr] gap-4">
      <!-- Sidebar: Commands -->
      <app-command-sidebar
        [data]="sidebarData()"
        (namespaceChange)="onNamespaceChange($event)"
        (deploymentChange)="onDeploymentChange($event)"
        (podChange)="onPodChange($event)"
        (serviceChange)="onServiceChange($event)"
        (templateExecute)="executeTemplate($event)"
        (toggleGeneralSection)="toggleGeneralSection()"
        (toggleDeploymentSection)="toggleDeploymentSection()"
        (togglePodSection)="togglePodSection()"
        (toggleServiceSection)="toggleServiceSection()">
      </app-command-sidebar>

      <!-- Main Content Area -->
      <div class="space-y-3 overflow-x-auto">
        <!-- Custom Command Input -->
        <div class="cyber-container p-3">
          <h2 class="text-lg font-semibold mb-2 glow-text" style="color: var(--accent-cyan)">Command Interface</h2>
          <div class="grid grid-cols-1 gap-2">
            <div>
              <label class="block text-xs font-medium mb-1" style="color: var(--text-secondary)">
                Kubectl Command
              </label>
              <input type="text" class="w-full p-2 bg-black border border-subtle font-mono text-xs terminal-output"
                style="color: var(--accent-green); border-color: var(--border-subtle);"
                placeholder="kubectl get pods -n noah" [value]="customCommand()" (input)="onCustomCommandChange($event)"
                (keydown)="onCommandInputKeyDown($event)">
            </div>
            <div class="execute-button-container">
              <button class="cyber-button py-2 px-3 font-semibold text-xs" [disabled]="isLoading()"
                (click)="executeCustomCommand()">
                {{ isLoading() ? 'EXECUTING...' : 'EXECUTE' }}
              </button>
              <div class="help-text text-xs" style="color: var(--text-secondary); line-height: 2.5;">
                Supports: -o yaml/json/wide/custom-columns • jsonpath • --no-headers • Cmd+Enter to execute
              </div>
            </div>
          </div>
        </div>

        <!-- Command Output & Visualization -->
        <app-output-display
          [data]="outputData()"
          (copyToClipboard)="copyToClipboard($event.text, $event.event)"
          (toggleTable)="toggleTable($event)"
          (toggleYamlExpansion)="toggleYamlExpansion($event)"
          (togglePodDetails)="togglePodDetails($event)"
          (toggleResourceDetails)="toggleResourceDetails()">
        </app-output-display>
      </div>
    </div>
  </div>
</div>

<router-outlet />